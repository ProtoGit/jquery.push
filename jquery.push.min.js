/**
 * https://github.com/ProtoGit/jquery.push
 */
(function(e){function t(e){if(typeof e=="string"){return e}if(typeof e=="object"){var t=e.get?e.get(0):unkown;if(t.tagName){var n=t.tagName.toLowerCase();if(n=="form"){return t.action}else if(n=="a"){return t.href}}}throw new Error("Invalid push() URI argument")}function n(t,n,i,s){var o=function(e){if(!e.responseJSON&&!i){throw new Error("Response must be valid JSON, or HTML with an output selector")}var n=window.document.title;if(e.responseJSON){var o={response:e.responseJSON};if(i){o.target=i}if(e.responseJSON.title){n=e.responseJSON.title}}else{var o={target:i,response:{content:e.responseText}}}if(typeof s=="function"){o.callback=s.toString()}window.history.pushState(o,n,t);r(o)};var u={url:t,dataType:"json",complete:o};if(n){u.type="POST";u.data=n}e.ajax(u)}function r(t){if(t.response.title){window.document.title=t.response.title}if(t.target&&t.response.content){e(t.target).html(t.response.content)}if(t.response.fragments){e.each(t.response.fragments,function(t,n){e("#"+t).html(n)})}if(t.callback){var n=Function("return "+t.callback)();n(t.response)}}if(!"history"in window||!"pushState"in window.history){throw new Error("No pushState API support")}e.push=function(){if(arguments.length===0){throw new Error("Invalid push() arguments")}if(arguments.length===1){return n(t(arguments[0]))}if(arguments.length===2&&typeof arguments[1]=="function"){return n(t(arguments[0]),null,null,arguments[1])}return n(t(arguments[0]),null,arguments[1],arguments[2])};e.postPush=function(){if(arguments.length<2){throw new Error("Invalid postPush() arguments")}if(arguments.length===2){return n(t(arguments[0]),arguments[1])}if(arguments.length===3&&typeof arguments[2]=="function"){return n(t(arguments[0]),arguments[1],null,arguments[2])}return n(t(arguments[0]),arguments[1],arguments[2],arguments[3])};e(window).on("popstate",function(e){console.log(e);if(e.originalEvent.state){r(e.originalEvent.state)}})})(jQuery);
